<h2>Create new consumable</h2>

<form
  [formGroup]="form"
  (ngSubmit)="submit()"
>
  <mat-form-field
    color="primary"
  >
    <mat-label>Name</mat-label>
    <input
      matInput
      placeholder="Please, input license's name"
      formControlName="name"
      id="name"
    >
    <mat-error
      *ngIf="form.get('name')?.touched && form.get('name')?.invalid"
    >
      {{ errorMessage('name') }}
    </mat-error>
  </mat-form-field>

  <mat-form-field
    color="primary"
  >
    <mat-label>Category</mat-label>
    <mat-select
      formControlName="category"
      id="category">
      <mat-option *ngFor="let category of licenseCategories" [value]="category">
        {{category | removeUnderscore}}
      </mat-option>
    </mat-select>
    <mat-error
      *ngIf="form.get('category')?.touched && form.get('category')?.invalid"
    >
      {{ errorMessage('category') }}
    </mat-error>
  </mat-form-field>

  <mat-form-field
    color="primary"
  >
    <mat-label>Product key</mat-label>
    <input
      matInput
      placeholder="Please, input license's product key"
      formControlName="productKey"
      id="productKey"
    >
  </mat-form-field>

  <mat-form-field
    color="primary"
  >
    <mat-label>Licensed to email</mat-label>
    <input
      matInput
      placeholder="Please, input license's email"
      formControlName="licensedToEmail"
      id="licensedToEmail"
    >
  </mat-form-field>

  <mat-form-field
    color="primary"
  >
    <mat-label>Expires date</mat-label>
    <input
      matInput
      [matDatepicker]="expiresPicker"
      formControlName="expiresAt"
      id="expiresAt"
    >
    <mat-datepicker-toggle matSuffix [for]="expiresPicker"></mat-datepicker-toggle>
    <mat-datepicker #expiresPicker></mat-datepicker>
    <mat-error
      *ngIf="form.get('expiresAt')?.touched && form.get('expiresAt')?.invalid"
    >
      {{ errorMessage('expires', 'At') }}
    </mat-error>
  </mat-form-field>

  <mat-form-field
    color="primary"
  >
    <mat-label>Manufacturer</mat-label>
    <input
      matInput
      placeholder="Please, input license's manufacturer"
      formControlName="manufacturer"
      id="manufacturer"
    >
    <mat-error
      *ngIf="form.get('manufacturer')?.touched && form.get('manufacturer')?.invalid"
    >
      {{ errorMessage('manufacturer') }}
    </mat-error>
  </mat-form-field>

  <mat-form-field
    color="primary"
  >
    <mat-label>Purchase cost</mat-label>
    <input
      matInput
      placeholder="Please, input license's purchase cost"
      formControlName="purchaseCost"
      id="purchaseCost"
    >
    <mat-error
      *ngIf="form.get('purchaseCost')?.touched && form.get('purchaseCost')?.invalid"
    >
      {{ errorMessage('purchase','cost') }}
    </mat-error>
  </mat-form-field>

  <mat-form-field
    color="primary"
  >
    <mat-label>Purchase date</mat-label>
    <input
      matInput
      [matDatepicker]="purchasePicker"
      formControlName="purchaseDate"
      id="purchaseDate"
    >
    <mat-datepicker-toggle matSuffix [for]="purchasePicker"></mat-datepicker-toggle>
    <mat-datepicker #purchasePicker></mat-datepicker>
    <mat-error
      *ngIf="form.get('purchaseDate')?.touched && form.get('purchaseDate')?.invalid"
    >
      {{ errorMessage('purchase', 'Date') }}
    </mat-error>
  </mat-form-field>

 <mat-checkbox
   color="primary"
   id="isReAssignable"
   formControlName="isReAssignable"
 >
  ReAssignable
 </mat-checkbox>

  <button
    mat-flat-button
    color="accent"
    type="submit"
    [disabled]="form.invalid || submitted"
  >
    Create
  </button>
</form>
